<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <!--Bootstrap styles-->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" />
    
    <!--Main stylesheet-->
    <link rel="stylesheet" href="/static/css/main.css" />

    <!--Google font Lato-->
    <link href='//fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>

    <title>Crime in India</title>
  </head>
<body>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <!--Navbar for mobile screens-->
      <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#my-navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
      </div>

      <!--Main navbar-->
      <div class="collapse navbar-collapse" id="my-navbar">
        <ul class="nav navbar-nav navbar-left">
          <li id="home" class="nav-item"><a href="/">Home</a></li>
          <li id="stories" class="nav-item"><a href="/stories" target="_blank">Stories</a></li>
          <li id="cities" class="nav-item"><a href="/city-list" target="_blank">Cities</a></li>
        </ul>

        <ul class="nav navbar-nav navbar-right">
          <li id="about-nav" class="nav-item"><a href="/about" target="_blank">About</a></li>
          <li id="references" class="nav-item"><a href="/references" target="_blank">References</a></li>
          <li id="crimes" class="nav-item"><a href="/data" target="_blank">Data</a></li>
        </ul>

      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
  </nav>
  <div class="container">
    <div class="row">
      <div class="main-header">
        <h1 class="text-center">Other dacoity</h1>
      </div>
    </div>

    <p class="desc">These are the top 10 cities with the highest Other dacoity rate.</p>
    <div id="main-chart"></div>
    
    <div class="table-responsive">
      <h3 class="text-center">Other dacoity rates in all cities</h3>
      <table class="table table-condensed table-striped table-bordered">
        <thead>
          <tr>
            <th class="text-center">City</th>
            <th class="text-right">2010</th>
            <th class="text-right">2011</th>
            <th class="text-right">2012</th>
            <th class="text-right">2013</th>
            <th class="text-right">2014</th>
            <th class="text-right">Average</th>
          </tr>
        </thead>
        <tbody>
          
          <tr>
            <td class="text-center"><a href="/cities/India">India</a></td>
            <td class="text-right"></td>
            <td class="text-right"></td>
            <td class="text-right"></td>
            <td class="text-right"></td>
            <td class="text-right">0.3</td>
            <td class="text-right">0.3</td>
          </tr>
          
        </tbody>
      </table>
    </div>
  </div>

  <!-- <script src="/static/d3/d3.min.js"></script> -->
  <script src="/static/jquery.min.js"></script>
  <script src="/static/highcharts.js"></script>

  <script type="text/javascript">
    var crimeData = [{"2010": "", "2011": "", "2012": "", "2013": "", "2014": "0.3", "avg": "0.3", "city": "India", "crime_name": "Other dacoity"}];

    drawCrime(crimeData);


    /* -----------------------------------------------------
    ----------------- DRAW CRIME --------------------------
    ------------------------------------------------------*/

    function drawCrime(crimeData) {
      var categs = [],
          data = [];

      var crimeData = crimeData.sort(function(a,b) {
        return +b.avg - +a.avg;
      });

      var natAvg = crimeData.filter(function(d) {
        return d.city === "India" 
      });

      // Get the top 10 cities and build data to display on chart
      crimeData = crimeData.slice(0,10);
      crimeData.forEach(function(d) {
        categs.push(d.city);
        data.push(+d.avg);
      });

      $(function () {
        $('#main-chart').highcharts({
          chart: {
                type: 'column'
            },
          title: {
              text: "Cities with highest crime rates",
              x: -20 //center
          },
          xAxis: {
              categories: categs
          },
          yAxis: {
              title: {
                  text: 'Crimes per 100,000 people'
              },
              plotLines: [{
                  value: +natAvg[0].avg,
                  color: 'green',
                  dashStyle: 'shortdash',
                  width: 2,
                  label: {
                      text: 'National average: ' + natAvg[0].avg,
                      rotation: -90,
                      y: -5,
                      x: 10
                  }
              }]
          },
          tooltip: {
              valueSuffix: ' crimes per 100,000'
          },
          credits: {
            enabled: false
          },
          legend: {
              layout: 'horizontal',
              align: 'right',
              verticalAlign: 'bottom',
              borderWidth: 0,
              floating: false
          },
          plotOptions: {
              column: {
                dataLabels: {
                    enabled: true
                }
              }
            },
          series: [{
            name: 'Other dacoity',
            data: data
          }]
        });
      });

    }
  
  </script>
  <footer>
  <div class="container text-center">
    <p class="text-muted">
      Made by Saurabh Datar
      <br>
      Icons courtesy <a href="https://thenounproject.com/naripuru/collection/crimes-and-justice-outlines/">parkjisun from The Noun Project</a>
    </p>
  </div>
</footer>
</body>
</html>